swagger: '2.0'
info:
  description: Operations can be done with OpenArchi models.
  version: 1.0.0
  title: OpenArchi API
  contact:
    email: alejandromanuel.mendez.aragua@bbva.com
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
host: "@HOST@"
basePath: "/open-archi/api"
tags:
- name: Models
  description: Set of functionalities related to model
schemes:
- http
- https
paths:
  "/models":
    options:
      tags:
      - Models
      summary: Shows options for models object
      operationId: options-models
      produces:
      - application/json
      responses:
        '200':
          description: OK
          schema:
            allOf:
            - $ref: "#/definitions/Options_Get_Collection"
            - $ref: "#/definitions/Options_Post"
    get:
      tags:
      - Models
      summary: Finds models
      description: This service supports query by using RSQL expressions
      operationId: get-models
      produces:
      - application/json
      parameters:
      - name: "$filter"
        in: query
        description: Filter models according to an RSQL expression
        required: false
        type: string
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: "#/definitions/Models"
        '400':
          description: Bad request
      security:
      - openarchi_auth:
        - read:models
    post:
      tags:
      - Models
      summary: Add a new model
      description: ''
      operationId: add-model
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - in: body
        name: body
        description: Model object that needs to be added
        required: true
        schema:
          $ref: "#/definitions/Model_Create"
      responses:
        '200':
          description: Accepted
        '201':
          description: Created
          schema:
            type: array
            items:
              $ref: "#/definitions/Models"
        '405':
          description: Invalid input
      security:
      - openarchi_auth:
        - write:model
        - read:models
  "/models/batch":
    options:
      tags:
      - Models
      summary: Shows options for batch models objects processing
      operationId: options-models-batch
      produces:
      - application/json
      responses:
        '200':
          description: OK
          schema:
            $ref: "#/definitions/Options_Post_Collection"
    post:
      tags:
      - Models
      summary: Add a list of models
      description: ''
      operationId: add-models
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - in: body
        name: body
        description: List of model objects that needs to be added
        required: true
        schema:
          $ref: "#/definitions/Models_Create"
      responses:
        '200':
          description: Accepted
        '201':
          description: Created
          schema:
            type: array
            items:
              $ref: "#/definitions/Models_Create"
        '405':
          description: Invalid input
      security:
      - openarchi_auth:
        - write:model
        - read:models
  "/models/:model-id":
    options:
      tags:
      - Models
      summary: Shows options for a specific model object
      operationId: options-model
      produces:
      - application/json
      responses:
        '200':
          description: OK
          schema:
            $ref: "#/definitions/Options_Get"
  "/models/{model-id}":
    get:
      tags:
      - Models
      summary: Find a model by ID
      description: Returns a single model
      operationId: get-model-by-id
      produces:
      - application/json
      parameters:
      - name: model-id
        in: path
        description: ID of the model to return
        required: true
        type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: "#/definitions/Model"
        '400':
          description: Invalid ID supplied
        '404':
          description: Model not found
securityDefinitions:
  openarchi_auth:
    type: oauth2
    authorizationUrl: https://@HOST@/oauth/dialog
    flow: implicit
    scopes:
      write:model: modify a model
      read:models: read your models
  api_key:
    type: apiKey
    name: api_key
    in: header
definitions:
  Architecture_Model:
    type: object
    description: Architecture Model object
    allOf:
    - $ref: "#/definitions/Element"
    - type: object
      properties:
        kind:
          type: string
          description: Type of model
          enum:
          - ARCHITECTURE_MODEL
        consumers:
          type: array
          description: Consumers of the model
          items:
            $ref: "#/definitions/Consumer"
        softwareSystems:
          type: array
          description: Consumers of the model
          items:
            $ref: "#/definitions/Software_System"
        deploymentNodes:
          type: array
          description: Deployment node of the model
          items:
            $ref: "#/definitions/Deployment_Node"
        relationships:
          type: array
          items:
            $ref: "#/definitions/Architecture_Relationship"
      required:
      - kind
  Architecture_Models:
    type: object
    description: Architecture Model object
    allOf:
    - $ref: "#/definitions/Elements"
    - type: object
      properties:
        kind:
          type: string
          description: Type of model
          enum:
          - ARCHITECTURE_MODEL
        consumers:
          type: array
          description: Consumers of the model
          items:
            $ref: "#/definitions/Consumers"
        softwareSystems:
          type: array
          description: Consumers of the model
          items:
            $ref: "#/definitions/Software_Systems"
        deploymentNodes:
          type: array
          description: Deployment node of the model
          items:
            $ref: "#/definitions/Deployment_Nodes"
        relationships:
          type: array
          items:
            $ref: "#/definitions/Architecture_Relationships"
      required:
      - kind
  Architecture_Model_Create:
    type: object
    description: Architecture Model object
    allOf:
    - $ref: "#/definitions/Element_Create"
    - type: object
      properties:
        kind:
          type: string
          description: Type of model
          enum:
          - ARCHITECTURE_MODEL
        consumers:
          type: array
          description: Consumers of the model
          items:
            $ref: "#/definitions/Consumer_Create"
        softwareSystems:
          type: array
          description: Consumers of the model
          items:
            $ref: "#/definitions/Software_System_Create"
        deploymentNodes:
          type: array
          description: Deployment node of the model
          items:
            $ref: "#/definitions/Deployment_Node_Create"
        relationships:
          type: array
          items:
            $ref: "#/definitions/Architecture_Relationship"
      required:
      - kind
  Architecture_Models_Create:
    type: object
  Architecture_Relationship:
    description: Relationship between model objects
    allOf:
    - $ref: "#/definitions/Relationship"
    - type: object
      properties:
        technology:
          type: string
          description: Technology that underlies the relationship between architecture's components
        interactionStyle:
          type: string
          description: Type of interaction between architecture's components
          enum:
          - SYNCHRONOUS
          - ASYNCHRONOUS
        type:
          type: string
          description: Type of relationship
          enum:
          - UNIDIRECTIONAL
          - BIDIRECTIONAL
      required:
      - type
  Architecture_Relationships:
    description: Relationship between model objects
    allOf:
    - $ref: "#/definitions/Relationships"
    - type: object
      properties:
        technology:
          type: string
          description: Technology that underlies the relationship between architecture's components
        interactionStyle:
          type: string
          description: Type of interaction between architecture's components
          enum:
          - SYNCHRONOUS
          - ASYNCHRONOUS
        type:
          type: string
          description: Type of relationship
          enum:
          - UNIDIRECTIONAL
          - BIDIRECTIONAL
      required:
      - type
  BPM_Model:
    type: object
  BPM_Models:
    type: object
  BPM_Model_Create:
    type: object
  BPM_Models_Create:
    type: object
  Consumer:
    type: object
    allOf:
    - $ref: "#/definitions/Static_Element"
    - type: object
      properties:
        scope:
          description: Scope on which this customer is relevant
          type: string
          enum:
          - Internal
          - External
          - Unspecified
        kind:
          type: string
          enum:
          - CONSUMER
  Consumer_Create:
    type: object
    allOf:
    - $ref: "#/definitions/Static_Element_Create"
    - type: object
      properties:
        scope:
          description: Scope on which this customer is relevant
          type: string
          enum:
          - Internal
          - External
          - Unspecified
        kind:
          type: string
          enum:
          - CONSUMER
  Consumers:
    type: object
    allOf:
    - $ref: "#/definitions/Static_Elements"
    - type: object
      properties:
        scope:
          description: Scope on which this customer is relevant
          type: string
          enum:
          - Internal
          - External
          - Unspecified
        kind:
          type: string
          enum:
          - CONSUMER
  Container:
    type: object
    description: Container
    properties:
      technology:
        type: string
        description: Technology that underlied this container
      components:
        type: array
        description: Components that conforms this container
        items:
          $ref: "#/definitions/Component"
  Containers:
    type: object
    description: Container
    properties:
      technology:
        type: string
        description: Technology that underlied this container
  Container_Create:
    type: object
    description: Container
    properties:
      technology:
        type: string
        description: Technology that underlied this container
      components:
        type: array
        description: Components that conforms this container
        items:
          $ref: "#/definitions/Component_Create"
  Container_Instance:
    description: Container Instance
    type: object
    allOf:
    - $ref: "#/definitions/Element"
    - type: object
      properties:
        container:
          description: Container
          $ref: "#/definitions/Container"
        containerId:
          description: Container identifier
          type: string
        instanceId:
          description: Instance identifier
          type: integer
          format: int32
        kind:
          type: string
          description: Type of element
          enum:
          - CONTAINER
  Container_Instance_Create:
    description: Container Instance
    type: object
    allOf:
    - $ref: "#/definitions/Element_Create"
    - type: object
      properties:
        container:
          description: Container
          $ref: "#/definitions/Container_Create"
        containerId:
          description: Container identifier
          type: string
        instanceId:
          description: Instance identifier
          type: integer
          format: int32
        kind:
          type: string
          description: Type of element
          enum:
          - CONTAINER
  Container_Instances:
    description: Container instances list
    type: object
    allOf:
    - $ref: "#/definitions/Elements"
    - type: object
      properties:
        container:
          description: Container
          $ref: "#/definitions/Containers"
        containerId:
          description: Container identifier
          type: string
        instanceId:
          description: Instance identifier
          type: integer
          format: int32
        kind:
          type: string
          description: Type of element
          enum:
          - CONTAINER
  Component:
    description: Component
    type: object
    allOf:
    - $ref: "#/definitions/Static_Element"
    - type: object
      properties:
        technology:
          description: Technology
          type: string
        size:
          description: Components
          type: integer
          format: int64
  Component_Create:
    description: Component
    type: object
    allOf:
    - $ref: "#/definitions/Static_Element_Create"
    - type: object
      properties:
        technology:
          description: Technology
          type: string
        size:
          description: Components
          type: integer
          format: int64
  Components:
    description: Component
    type: object
    allOf:
    - $ref: "#/definitions/Static_Elements"
    - type: object
      properties:
        technology:
          description: Technology
          type: string
        size:
          description: Components
          type: integer
          format: int64
  Element:
    type: object
    description: Abstract element object
    allOf:
    - $ref: "#/definitions/Item"
    - type: object
      properties:
        url:
          type: string
          description: Url for the physical access to the of model
        properties:
          type: object
          description: Extensible and customizable properties related to an element
          additionalProperties:
            type: string
        features:
          type: array
          description: Features that conforms the model
          items:
            $ref: "#/definitions/Feature"
  Element_Create:
    type: object
    description: Abstract element object
    allOf:
    - $ref: "#/definitions/Item_Create"
    - type: object
      properties:
        url:
          type: string
          description: Url for the physical access to the of model
        properties:
          type: object
          description: Extensible and customizable properties related to an element
          additionalProperties:
            type: string
        features:
          type: array
          description: Features that conforms the model
          items:
            $ref: "#/definitions/Feature_Create"
  Elements:
    type: object
    description: Abstract element object
    allOf:
    - $ref: "#/definitions/Items"
    - type: object
      properties:
        url:
          type: string
          description: Url for the physical access to the of model
  Deployment_Node:
    description: Deployment Node
    type: object
    allOf:
    - $ref: "#/definitions/Element"
    - type: object
      properties:
        technology:
          description: Technology
          type: string
        instances:
          description: Instances
          type: integer
          format: int32
        kind:
          type: string
          description: Type of element
          enum:
          - DEPLOYMENT
        containerInstances:
          type: array
          items:
            $ref: "#/definitions/Container_Instance"
  Deployment_Node_Create:
    description: Deployment Node
    type: object
    allOf:
    - $ref: "#/definitions/Element_Create"
    - type: object
      properties:
        technology:
          description: Technology
          type: string
        instances:
          description: Instances
          type: integer
          format: int32
        kind:
          type: string
          description: Type of element
          enum:
          - DEPLOYMENT
        containerInstances:
          type: array
          items:
            $ref: "#/definitions/Container_Instance_Create"
  Deployment_Nodes:
    description: Deployment Node
    type: object
    allOf:
    - $ref: "#/definitions/Elements"
    - type: object
      properties:
        technology:
          description: Technology
          type: string
        instances:
          description: Instances
          type: integer
          format: int32
        kind:
          type: string
          description: Type of element
          enum:
          - DEPLOYMENT
        containerInstances:
          type: array
          items:
            $ref: "#/definitions/Container_Instances"
  Feature:
    description: Feature an element can handle
    allOf:
    - $ref: "#/definitions/Item"
    - type: object
      properties:
        role:
          type: string
          description: the role of the feature ... Primary or Supporting
          enum:
          - Primary
          - Supporting
        url:
          type: string
          description: a URL; e.g. a reference to the feature in source code control
        category:
          type: string
          description: the category of feature; e.g. class, interface, etc
          enum:
          - CATEGORY_1
          - CATEGORY_2
        visibility:
          type: string
          description: the visibility of the feature; e.g. public, package, private
        incomingConstraints:
          type: array
          description: Aspects that conditionates an element can have this feature
          items:
            $ref: "#/definitions/Volumetry"
        outgoingConstraints:
          type: array
          description: Aspects that conditionates how this feature can be related to another element
          items:
            $ref: "#/definitions/Volumetry"
        kind:
          type: string
          enum:
          - FEATURE
  Features:
    description: Feature an element can handle
    allOf:
    - $ref: "#/definitions/Items"
    - type: object
      properties:
        role:
          type: string
          description: the role of the feature ... Primary or Supporting
          enum:
          - Primary
          - Supporting
        url:
          type: string
          description: a URL; e.g. a reference to the feature in source code control
        category:
          type: string
          description: the category of feature; e.g. class, interface, etc
          enum:
          - CATEGORY_1
          - CATEGORY_2
        visibility:
          type: string
          description: the visibility of the feature; e.g. public, package, private
        kind:
          type: string
          enum:
          - FEATURE
  Feature_Create:
    description: Feature an element can handle
    allOf:
    - $ref: "#/definitions/Item_Create"
    - type: object
      properties:
        role:
          type: string
          description: the role of the feature ... Primary or Supporting
          enum:
          - Primary
          - Supporting
        url:
          type: string
          description: a URL; e.g. a reference to the feature in source code control
        category:
          type: string
          description: the category of feature; e.g. class, interface, etc
          enum:
          - CATEGORY_1
          - CATEGORY_2
        visibility:
          type: string
          description: the visibility of the feature; e.g. public, package, private
        incomingConstraints:
          type: array
          description: Aspects that conditionates an element can have this feature
          items:
            $ref: "#/definitions/Volumetry_Create"
        outgoingConstraints:
          type: array
          description: Aspects that conditionates how this feature can be related to another element
          items:
            $ref: "#/definitions/Volumetry_Create"
        kind:
          type: string
          enum:
          - FEATURE
  Flowchart_Model:
    type: object
  Flowchart_Models:
    type: object
  Flowchart_Model_Create:
    type: object
  Flowchart_Models_Create:
    type: object
  Gantt_Model:
    type: object
  Gantt_Models:
    type: object
  Gantt_Model_Create:
    type: object
  Gantt_Models_Create:
    type: object
  Item:
    type: object
  Item_Create:
    type: object
  Items:
    type: object
  Model:
    description: Model object
    type: object
    allOf:
    - $ref: "#/definitions/Architecture_Model"
    - $ref: "#/definitions/BPM_Model"
    - $ref: "#/definitions/Flowchart_Model"
    - $ref: "#/definitions/Gantt_Model"
    - $ref: "#/definitions/Sequence_Model"
  Models:
    description: List of model objects
    type: object
    allOf:
    - $ref: "#/definitions/Architecture_Models"
    - $ref: "#/definitions/BPM_Models"
    - $ref: "#/definitions/Flowchart_Models"
    - $ref: "#/definitions/Gantt_Models"
    - $ref: "#/definitions/Sequence_Models"
  Model_Create:
    description: Model object to be created
    type: object
    allOf:
    - $ref: "#/definitions/Architecture_Model_Create"
    - $ref: "#/definitions/BPM_Model_Create"
    - $ref: "#/definitions/Flowchart_Model_Create"
    - $ref: "#/definitions/Gantt_Model_Create"
    - $ref: "#/definitions/Sequence_Model_Create"
  Models_Create:
    description: List of model objects to be created
    type: object
    allOf:
    - $ref: "#/definitions/Architecture_Models_Create"
    - $ref: "#/definitions/BPM_Models_Create"
    - $ref: "#/definitions/Flowchart_Models_Create"
    - $ref: "#/definitions/Gantt_Models_Create"
    - $ref: "#/definitions/Sequence_Models_Create"
  Options_Input_Item:
    type: object
    properties:
      input:
        type: object
  Options_Output_Item:
    type: object
    properties:
      output:
        type: object
  Options_Input_Collection_Item:
    type: object
    properties:
      output:
        type: array
        items:
          type: object
  Options_Output_Collection_Item:
    type: object
    properties:
      output:
        type: array
        items:
          type: object
  Options_Get_Collection:
    description: Generic object to expose endpoint functionalitites
    properties:
      get:
        $ref: '#/definitions/Options_Output_Collection_Item'
  Options_Get:
    description: Generic object to expose endpoint functionalitites
    properties:
      get:
        $ref: '#/definitions/Options_Output_Item'
  Options_Post:
    description: Generic object to expose endpoint functionalitites
    properties:
      post:
        $ref: '#/definitions/Options_Input_Item'
  Options_Post_Collection:
    description: Generic object to expose endpoint functionalitites for batching input processing
    properties:
      post:
        $ref: '#/definitions/Options_Input_Collection_Item'
  Options_Put:
    description: Generic object to expose endpoint functionalitites
    properties:
      put:
        $ref: '#/definitions/Options_Input_Item'
  Options_Patch:
    description: Generic object to expose endpoint functionalitites
    properties:
      patch:
        $ref: '#/definitions/Options_Input_Item'
      head:
        $ref: '#/definitions/Options_Output_Item'
  Options_Head:
    description: Generic object to expose endpoint functionalitites
    properties:
      head:
        $ref: '#/definitions/Options_Output_Item'
  Relationship:
    type: object
  Relationships:
    type: object
  Sequence_Model:
    type: object
  Sequence_Models:
    type: object
  Sequence_Model_Create:
    type: object
  Sequence_Models_Create:
    type: object
  Software_System:
    description: Software System
    type: object
    allOf:
    - $ref: "#/definitions/Static_Element"
    - type: object
      properties:
        scope:
          description: Scope on which this software system is relevant
          type: string
          enum:
          - Internal
          - External
          - Unspecified
        containers:
          description: Containers embeded in this software system
          type: array
          items:
            $ref: "#/definitions/Container"
  Software_System_Create:
    description: Software System
    type: object
    allOf:
    - $ref: "#/definitions/Static_Element_Create"
    - type: object
      properties:
        scope:
          description: Scope on which this software system is relevant
          type: string
          enum:
          - Internal
          - External
          - Unspecified
        containers:
          description: Containers embeded in this software system
          type: array
          items:
            $ref: "#/definitions/Container_Create"
  Software_Systems:
    description: Software System
    type: object
    allOf:
    - $ref: "#/definitions/Static_Elements"
    - type: object
      properties:
        scope:
          description: Scope on which this software system is relevant
          type: string
          enum:
          - Internal
          - External
          - Unspecified
        containers:
          description: Containers embeded in this software system
          type: array
          items:
            $ref: "#/definitions/Containers"
  Static_Element:
    type: object
    description: Static element
    allOf:
    - $ref: "#/definitions/Element"
    - type: object
      properties:
        kind:
          description: Type of static element
          type: string
          enum:
          - COMPONENT
      required:
      - kind
  Static_Element_Create:
    type: object
    description: Static element
    allOf:
    - $ref: "#/definitions/Element_Create"
    - type: object
      properties:
        kind:
          description: Type of static element
          type: string
          enum:
          - COMPONENT
      required:
      - kind
  Static_Elements:
    type: object
    description: Static element
    allOf:
    - $ref: "#/definitions/Elements"
    - type: object
      properties:
        kind:
          description: Type of static element
          type: string
          enum:
          - COMPONENT
      required:
      - kind
  Volumetry:
    type: object
  Volumetry_Create:
    type: object